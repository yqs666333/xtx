<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>Vue3 基础 | 小兔鲜儿PC前台-开发文档</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/vue3-ts-erabbit-client-pc-document/public/hero.png">
    <meta name="description" content="小兔鲜儿PC前台-开发文档">
    <link rel="preload" href="/vue3-ts-erabbit-client-pc-document/assets/css/0.styles.03557c56.css" as="style"><link rel="preload" href="/vue3-ts-erabbit-client-pc-document/assets/js/app.37883b6e.js" as="script"><link rel="preload" href="/vue3-ts-erabbit-client-pc-document/assets/js/2.6206effc.js" as="script"><link rel="preload" href="/vue3-ts-erabbit-client-pc-document/assets/js/5.eade28ba.js" as="script"><link rel="prefetch" href="/vue3-ts-erabbit-client-pc-document/assets/js/10.9d62676c.js"><link rel="prefetch" href="/vue3-ts-erabbit-client-pc-document/assets/js/11.0450e17c.js"><link rel="prefetch" href="/vue3-ts-erabbit-client-pc-document/assets/js/12.20ad36f2.js"><link rel="prefetch" href="/vue3-ts-erabbit-client-pc-document/assets/js/13.1d258475.js"><link rel="prefetch" href="/vue3-ts-erabbit-client-pc-document/assets/js/14.9ffdd9a0.js"><link rel="prefetch" href="/vue3-ts-erabbit-client-pc-document/assets/js/15.fd700b2c.js"><link rel="prefetch" href="/vue3-ts-erabbit-client-pc-document/assets/js/16.1ead774b.js"><link rel="prefetch" href="/vue3-ts-erabbit-client-pc-document/assets/js/17.db1b9830.js"><link rel="prefetch" href="/vue3-ts-erabbit-client-pc-document/assets/js/18.729f4832.js"><link rel="prefetch" href="/vue3-ts-erabbit-client-pc-document/assets/js/19.69ab7bd4.js"><link rel="prefetch" href="/vue3-ts-erabbit-client-pc-document/assets/js/20.586c4c11.js"><link rel="prefetch" href="/vue3-ts-erabbit-client-pc-document/assets/js/21.f402cea7.js"><link rel="prefetch" href="/vue3-ts-erabbit-client-pc-document/assets/js/22.223b671f.js"><link rel="prefetch" href="/vue3-ts-erabbit-client-pc-document/assets/js/23.d5bf69df.js"><link rel="prefetch" href="/vue3-ts-erabbit-client-pc-document/assets/js/24.8dc79d49.js"><link rel="prefetch" href="/vue3-ts-erabbit-client-pc-document/assets/js/25.a1c7fe92.js"><link rel="prefetch" href="/vue3-ts-erabbit-client-pc-document/assets/js/3.30ca6af5.js"><link rel="prefetch" href="/vue3-ts-erabbit-client-pc-document/assets/js/4.c31de7f7.js"><link rel="prefetch" href="/vue3-ts-erabbit-client-pc-document/assets/js/6.381cb28d.js"><link rel="prefetch" href="/vue3-ts-erabbit-client-pc-document/assets/js/7.ce4fa56f.js"><link rel="prefetch" href="/vue3-ts-erabbit-client-pc-document/assets/js/8.f1e3fba3.js"><link rel="prefetch" href="/vue3-ts-erabbit-client-pc-document/assets/js/9.f2d2558a.js">
    <link rel="stylesheet" href="/vue3-ts-erabbit-client-pc-document/assets/css/0.styles.03557c56.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="ant-row"><div class="nav-button"><i aria-label="icon: bars" class="anticon anticon-bars"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="bars" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0z"></path></svg></i> <span></span></div> <div class="ant-col ant-col-xs-24 ant-col-sm-24 ant-col-md-6 ant-col-lg-5 ant-col-xl-5 ant-col-xxl-4"><a href="/vue3-ts-erabbit-client-pc-document/" class="router-link-active home-link"><img src="/vue3-ts-erabbit-client-pc-document/hero.png" alt="小兔鲜儿PC前台-开发文档" class="logo"> <span class="site-name">小兔鲜儿PC前台-开发文档</span></a> <div class="search-box mobile-search"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="ant-col ant-col-xs-0 ant-col-sm-0 ant-col-md-18 ant-col-lg-19 ant-col-xl-19 ant-col-xxl-20"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><ul role="menu" id="nav" class="ant-menu ant-menu-horizontal ant-menu-root ant-menu-light"><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/vue3-ts-erabbit-client-pc-document/typescript/typescript.html">
          TS基础
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/vue3-ts-erabbit-client-pc-document/vite/vite.html">
          Vite基础
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-submenu-selected"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          Vue3基础
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/vue3-ts-erabbit-client-pc-document/pinia/pinia.html">
          Pinia基础
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          功能模块📂
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/vue3-ts-erabbit-client-pc-document/rabbit-shop/10-end.html">
          项目总结
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/vue3-ts-erabbit-client-pc-document/vscode/vscode.html">
          VsCode配置
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul> <a href="https://github.com/git@git.itcast.cn:sujiehao/erabbit-client-pc-vue3-ts-pinia.git" target="_blank" rel="noopener noreferrer" class="repo-link"><i aria-label="icon: Gitlab" class="anticon anticon-Gitlab"><!----></i></a></nav></div></div> <!----></header> <aside class="sidebar"><!----> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Vue3 基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#概述" title="概述" class="sidebar-link">概述</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#官方文档" title="官方文档" class="sidebar-link">官方文档</a></li></ul></li><li><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#为什么要学-vue3" title="为什么要学 Vue3 ？" class="sidebar-link">为什么要学 Vue3 ？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#vue-3-作为新的默认版本" title="Vue 3 作为新的默认版本" class="sidebar-link">Vue 3 作为新的默认版本</a></li><li class="sidebar-sub-header"><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#vue3-的优化和改进" title="Vue3 的优化和改进" class="sidebar-link">Vue3 的优化和改进</a></li></ul></li><li><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#vue3-新特性" title="Vue3 新特性" class="sidebar-link">Vue3 新特性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#vue3-新特性介绍" title="Vue3 新特性介绍" class="sidebar-link">Vue3 新特性介绍</a></li><li class="sidebar-sub-header"><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#片段-fragment" title="片段 Fragment" class="sidebar-link">片段 Fragment</a></li></ul></li><li><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#vue-项目入口" title="Vue 项目入口" class="sidebar-link">Vue 项目入口</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#main-ts-分析" title="main.ts 分析" class="sidebar-link">main.ts 分析</a></li></ul></li><li><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#vue3中的两种-api-风格" title="Vue3中的两种 API 风格" class="sidebar-link">Vue3中的两种 API 风格</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#为什么组合式-api" title="为什么组合式 API" class="sidebar-link">为什么组合式 API</a></li><li class="sidebar-sub-header"><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#风格对比" title="风格对比" class="sidebar-link">风格对比</a></li><li class="sidebar-sub-header"><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#案例对比" title="案例对比" class="sidebar-link">案例对比</a></li><li class="sidebar-sub-header"><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#选项式和组合式api的关系" title="选项式和组合式API的关系" class="sidebar-link">选项式和组合式API的关系</a></li></ul></li><li><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#组合式api基础" title="组合式API基础" class="sidebar-link">组合式API基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#setup-入口函数" title="setup 入口函数" class="sidebar-link">setup 入口函数</a></li><li class="sidebar-sub-header"><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#响应式api-reactive" title="响应式API - reactive" class="sidebar-link">响应式API - reactive</a></li><li class="sidebar-sub-header"><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#响应式api-ref" title="响应式API - ref" class="sidebar-link">响应式API - ref</a></li><li class="sidebar-sub-header"><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#reative-对比-ref" title="reative 对比 ref" class="sidebar-link">reative 对比 ref</a></li></ul></li><li><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#单文件组件-script-setup" title="单文件组件&lt;script setup&gt;" class="sidebar-link">单文件组件&lt;script setup&gt;</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#基本语法" title="基本语法" class="sidebar-link">基本语法</a></li><li class="sidebar-sub-header"><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#顶层的绑定会被暴露给模板" title="顶层的绑定会被暴露给模板" class="sidebar-link">顶层的绑定会被暴露给模板</a></li><li class="sidebar-sub-header"><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#响应式" title="响应式" class="sidebar-link">响应式</a></li><li class="sidebar-sub-header"><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#自动注册组件" title="自动注册组件" class="sidebar-link">自动注册组件</a></li><li class="sidebar-sub-header"><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#响应式api-computed" title="响应式API - computed" class="sidebar-link">响应式API - computed</a></li><li class="sidebar-sub-header"><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#响应式api-watch" title="响应式API -  watch" class="sidebar-link">响应式API -  watch</a></li><li class="sidebar-sub-header"><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#生命周期函数" title="生命周期函数" class="sidebar-link">生命周期函数</a></li><li class="sidebar-sub-header"><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#父子通信" title="父子通信" class="sidebar-link">父子通信</a></li><li class="sidebar-sub-header"><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#provide-和-inject" title="provide 和 inject" class="sidebar-link">provide 和 inject</a></li><li class="sidebar-sub-header"><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#template-ref" title="Template-Ref" class="sidebar-link">Template-Ref</a></li></ul></li><li><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#vue3-语法兼容问题" title="Vue3 语法兼容问题" class="sidebar-link">Vue3 语法兼容问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#官方文档-2" title="官方文档" class="sidebar-link">官方文档</a></li><li class="sidebar-sub-header"><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#格外注意的非兼容变更" title="格外注意的非兼容变更" class="sidebar-link">格外注意的非兼容变更</a></li></ul></li><li><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#综合案例" title="综合案例" class="sidebar-link">综合案例</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#素材资源" title="素材资源" class="sidebar-link">素材资源</a></li><li class="sidebar-sub-header"><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#项目开发步骤" title="项目开发步骤" class="sidebar-link">项目开发步骤</a></li><li class="sidebar-sub-header"><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#实现功能" title="实现功能" class="sidebar-link">实现功能</a></li></ul></li><li><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#vue3-社区生态" title="Vue3 社区生态" class="sidebar-link">Vue3 社区生态</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#社区生态" title="社区生态" class="sidebar-link">社区生态</a></li><li class="sidebar-sub-header"><a href="/vue3-ts-erabbit-client-pc-document/vue3/vue3-ts.html#社区生态作品" title="社区生态作品" class="sidebar-link">社区生态作品</a></li></ul></li></ul></section></li></ul></aside> <main class="page"> <div class="theme-antdocs-content content__default"><h1 id="vue3-基础"><a href="#vue3-基础" class="header-anchor">#</a> Vue3 基础</h1> <p><img src="/vue3-ts-erabbit-client-pc-document/assets/img/vue-logo.d4fa4099.svg" alt="img"></p> <h2 id="概述"><a href="#概述" class="header-anchor">#</a> 概述</h2> <h3 id="官方文档"><a href="#官方文档" class="header-anchor">#</a> 官方文档</h3> <blockquote><p>Vue3 官方文档：<a href="https://v3.cn.vuejs.org/" target="_blank" rel="noopener noreferrer">⚓https://v3.cn.vuejs.org/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p>相关阅读：</p> <ul><li>Vue3 设计理念  https://vue3js.cn/vue-composition/</li></ul> <h2 id="为什么要学-vue3"><a href="#为什么要学-vue3" class="header-anchor">#</a> 为什么要学 Vue3 ？</h2> <h3 id="vue-3-作为新的默认版本"><a href="#vue-3-作为新的默认版本" class="header-anchor">#</a> Vue 3 作为新的默认版本</h3> <ul><li>Vue 3 于 2022 年 2 月 7 日星期一成为新的默认版本！</li></ul> <blockquote><p>原文链接：<a href="https://blog.vuejs.org/posts/vue-3-as-the-new-default.html" target="_blank" rel="noopener noreferrer">https://blog.vuejs.org/posts/vue-3-as-the-new-default.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p><img src="/vue3-ts-erabbit-client-pc-document/assets/img/vue3_default.2791d4c8.png" alt="Vue3作为新的默认版本"></p> <h3 id="vue3-的优化和改进"><a href="#vue3-的优化和改进" class="header-anchor">#</a> Vue3 的优化和改进</h3> <ul><li><p>速度极快，由 <code>Vite</code> 驱动的构建工具链</p></li> <li><p>更符合人体工程学的组合 API 语法通过 <code>&lt;script setup&gt;</code></p></li> <li><p>通过 <code>Volar</code> 改进了对单个文件组件的 <code>TypeScript IDE</code> 支持</p></li> <li><p>通过 <code>Pinia</code> 进行更简单的状态管理</p></li> <li><p>新的 <code>devtools</code> 扩展同时支持 <code>Vue2/Vue3</code> 和允许社区库连接到 <code>devtools</code> 面板的插件系统</p></li></ul> <h2 id="vue3-新特性"><a href="#vue3-新特性" class="header-anchor">#</a> Vue3 新特性</h2> <h3 id="vue3-新特性介绍"><a href="#vue3-新特性介绍" class="header-anchor">#</a> Vue3 新特性介绍</h3> <ul><li><a href="https://v3.cn.vuejs.org/guide/migration/fragments.html" target="_blank" rel="noopener noreferrer">片段<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://v3.cn.vuejs.org/guide/composition-api-introduction.html" target="_blank" rel="noopener noreferrer">组合式 API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://v3.cn.vuejs.org/api/sfc-script-setup.html" target="_blank" rel="noopener noreferrer">单文件组件组合式 API 语法糖 (<code>&lt;script setup&gt;</code>)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://v3.cn.vuejs.org/guide/teleport.html" target="_blank" rel="noopener noreferrer">Teleport<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://v3.cn.vuejs.org/guide/migration/suspense.html" target="_blank" rel="noopener noreferrer">Suspense<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 实验性</li> <li><a href="https://github.com/vuejs/rfcs/blob/master/active-rfcs/0023-scoped-styles-changes.md" target="_blank" rel="noopener noreferrer">SFC <code>&lt;style scoped&gt;</code> 现在可以包含全局规则或只针对插槽内容的规则<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://v3.cn.vuejs.org/api/sfc-style.html#%E7%8A%B6%E6%80%81%E9%A9%B1%E5%8A%A8%E7%9A%84%E5%8A%A8%E6%80%81-css" target="_blank" rel="noopener noreferrer">单文件组件状态驱动的 CSS 变量 (<code>&lt;style&gt;</code> 中的 <code>v-bind</code>)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <blockquote><p>🔔 温馨提示</p> <ul><li>基础阶段重点学习 <code>组合式API</code> 和 <code>&lt;script setup&gt;</code></li> <li>项目阶段直接使用 <code>Teleport</code> 和 <code>Suspense</code></li> <li>自行查阅官方文档了解 <code>&lt;style scoped&gt;</code> 中的全局规则 和 <code>&lt;style&gt;</code> 中的 <code>v-bind</code></li></ul></blockquote> <h3 id="片段-fragment"><a href="#片段-fragment" class="header-anchor">#</a> 片段 Fragment</h3> <p>vue3 允许我们支持多个根节点</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Hello Vue3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>Great<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>问题小结:</p> <ul><li>Vue2 中书写多个根节点会怎样，如何解决?</li></ul> <h2 id="vue-项目入口"><a href="#vue-项目入口" class="header-anchor">#</a> Vue 项目入口</h2> <h3 id="main-ts-分析"><a href="#main-ts-分析" class="header-anchor">#</a> main.ts 分析</h3> <p>说明: <strong>把 <code>App.vue</code> 渲染到 <code>index.html</code> 的指定区域中</strong>。</p> <p>其中：</p> <ul><li><code>App.vue</code> 用来编写待渲染的模板结构</li> <li><code>index.html</code> 中需要预留一个 <code>el</code> 区域</li> <li><code>main.ts</code> 把 <code>App.vue</code> 渲染到了 <code>index.html</code> 所预留的区域中</li></ul> <p><code>src\main.ts</code></p> <p>vue2.x</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token parameter">h</span> <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>vue3.x</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre></div><p>以上就我们当前阶段需要关注的所有的东西，接下来我们就可以基于当前环境学习vue3的全新组合式API</p> <p>问题小结:</p> <ul><li><code>main.ts</code> 做的最核心的一件事情是什么 ?</li></ul> <h2 id="vue3中的两种-api-风格"><a href="#vue3中的两种-api-风格" class="header-anchor">#</a> Vue3中的两种 API 风格</h2> <p>组合式API（Composition API）算是 vue3 对我们开发者来说非常有价值的更新，我们先不关注具体语法，先对它有一个大的感知</p> <blockquote><p>🎯 本节目标</p> <ul><li>对组合式 API（composition api）有一个大概的感性认知</li></ul></blockquote> <h3 id="为什么组合式-api"><a href="#为什么组合式-api" class="header-anchor">#</a> 为什么组合式 API</h3> <blockquote><p><a href="https://v3.cn.vuejs.org/guide/composition-api-introduction.html" target="_blank" rel="noopener noreferrer">⚓ 组合API文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <ul><li>传统方式使用 (<code>data</code>、<code>computed</code>、<code>methods</code>、<code>watch</code>) 组件选项来组织逻辑通常都很容易上手。</li> <li>然而，当我们的组件开始变得更大时，<strong>逻辑关注点</strong>的列表也会增长，最终会导致组件难以阅读和理解。</li> <li>这是一个大型组件的示例，其中<strong>逻辑关注点</strong>按颜色进行分组。</li> <li>在处理单个逻辑关注点时，我们必须不断地“跳转”相关代码的选项块。</li> <li>🎉组合式 API 能够将同一个逻辑关注点相关代码收集在一起。</li></ul> <h3 id="风格对比"><a href="#风格对比" class="header-anchor">#</a> 风格对比</h3> <p><img src="/vue3-ts-erabbit-client-pc-document/assets/img/04.95ca1632.png" alt="传统API和组合式API"></p> <p>​	<img src="/vue3-ts-erabbit-client-pc-document/assets/img/06.e87b1abe.png" alt="vue3/06.png"></p> <h3 id="案例对比"><a href="#案例对比" class="header-anchor">#</a> 案例对比</h3> <p>我们通过图示简单了解了一下vue3带来的全新的api形式，这一小节，我们通过一个具体的小案例更加深入的体会一下俩种api下的开发模式对比，大家暂时忽略语法细节，只关注代码编写形式</p> <blockquote><p>🎯 本节目标</p> <ul><li>通过两种Api形式实现同一个需求，理解 <code>compition api</code> 带来的好处</li></ul></blockquote> <p><strong>理解需求</strong></p> <p><img src="/vue3-ts-erabbit-client-pc-document/assets/img/12.dd2bece3.png" alt="vue3/12.png"></p> <h4 id="_1-选项式api版本实现"><a href="#_1-选项式api版本实现" class="header-anchor">#</a> 1. 选项式Api版本实现</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 功能一模板 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>显示<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hide<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>隐藏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showDiv<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>一个被控制显隐的div<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 功能二模板 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeRed<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>红色<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeYellow<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>蓝色<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>`color:${fontColor}`<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>一个被控制字体颜色的的div<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">showDiv</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 功能一数据</span>
      <span class="token literal-property property">fontColor</span><span class="token operator">:</span> <span class="token string">''</span> <span class="token comment">// 功能二数据</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 功能一方法</span>
    <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>showDiv <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>showDiv <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 功能二方法</span>
    <span class="token function">changeRed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>fontColor <span class="token operator">=</span> <span class="token string">'red'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">changeYellow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>fontColor <span class="token operator">=</span> <span class="token string">'blue'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="_2-组合式api版本"><a href="#_2-组合式api版本" class="header-anchor">#</a> 2. 组合式API版本</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 功能一模板 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>显示<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hide<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>隐藏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showDivFlag<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>一个被控制显隐的div<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 功能二模板 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeRed<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>红色<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeBlue<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>蓝色<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>`color:${fontColor}`<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>一个被控制字体颜色的的div<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 功能一</span>
    <span class="token keyword">const</span> showDivFlag <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token keyword">function</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      showDivFlag<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      showDivFlag<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 功能二</span>
    <span class="token keyword">const</span> fontColor <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
    <span class="token keyword">function</span> <span class="token function">changeRed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      fontColor<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'red'</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">changeBlue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      fontColor<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'blue'</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> showDivFlag<span class="token punctuation">,</span> show<span class="token punctuation">,</span> hide<span class="token punctuation">,</span> fontColor<span class="token punctuation">,</span> changeRed<span class="token punctuation">,</span> changeBlue <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="_3-组合式api优化版本"><a href="#_3-组合式api优化版本" class="header-anchor">#</a> 3. 组合式API优化版本</h4> <blockquote><p>大家可能会有疑惑，那我们现在是把功能相关的所有数据和行为放到一起维护了，如果应用很大功能很多的情况下，setup函数不会变得很大吗？岂不是又会变得比较难维护，接下来我们就来拆解一下庞大的setup函数</p></blockquote> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token comment">// 功能A</span>
<span class="token keyword">function</span> <span class="token function">useShow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> showDivFlag <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">function</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    showDivFlag<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    showDivFlag<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> showDivFlag<span class="token punctuation">,</span> show<span class="token punctuation">,</span> hide <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 功能B</span>
<span class="token keyword">function</span> <span class="token function">useColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> fontColor <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
  <span class="token keyword">function</span> <span class="token function">changeRed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fontColor<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'red'</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">changeBlue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fontColor<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'blue'</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> fontColor<span class="token punctuation">,</span> changeRed<span class="token punctuation">,</span> changeBlue <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 功能一</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> showDivFlag<span class="token punctuation">,</span> show<span class="token punctuation">,</span> hide <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useShow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 功能二</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> fontColor<span class="token punctuation">,</span> changeRed<span class="token punctuation">,</span> changeBlue <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> showDivFlag<span class="token punctuation">,</span> show<span class="token punctuation">,</span> hide<span class="token punctuation">,</span> fontColor<span class="token punctuation">,</span> changeRed<span class="token punctuation">,</span> changeBlue <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p>以上，我们通过定义功能函数，把俩个功能相关的代码各自抽离到一个独立的小函数中，然后通过在setUp函数中再把俩个小功能函数组合起来，这样一来，我们既可以把setup函数变得清爽，又可以方便维护快速定位功能位置</p> <h3 id="选项式和组合式api的关系"><a href="#选项式和组合式api的关系" class="header-anchor">#</a> 选项式和组合式API的关系</h3> <blockquote><p>🎯 本节目标</p> <ul><li>能够理清楚俩种API之间的关系</li></ul></blockquote> <ol><li>组合式API的目的是<strong>增强</strong>，不是取代选项式API，vue3.x对俩种API都支持</li> <li>简单的场景使用选项式API更加简单方便</li> <li>需要<strong>强烈支持TS</strong>的项目首选组合式API</li> <li>需要<strong>大量逻辑复用</strong>的场景首选组合式API</li> <li>🎉组合式 API 能够将同一个逻辑关注点相关代码收集在一起。</li></ol> <p>nice~  到此我们没有关注api细节，只是体会组合式 api 给到我们的好处，接下来我们就要深入到api细节，看看全新的api都该如何使用</p> <p>问题小结:</p> <ul><li>组合式 API  的优势是什么 ?</li></ul> <h2 id="组合式api基础"><a href="#组合式api基础" class="header-anchor">#</a> 组合式API基础</h2> <h3 id="setup-入口函数"><a href="#setup-入口函数" class="header-anchor">#</a> setup 入口函数</h3> <p>在 Vue3 组件中，要开始使用组合式 API，需要书写在<code>setup</code> 函数内。</p> <blockquote><p>🎯 本节目标</p> <ul><li>能够理解 <code>setup</code> 函数的作用和调用时机</li></ul></blockquote> <p><strong>主要内容</strong></p> <ol><li>setup 函数是Vue3新增的组件选项，作为组件中组合式API 的起点（入口）</li> <li>setup 函数只会在组件初始化的时候执行一次</li></ol> <p><strong>代码演示</strong></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Hello setup<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setup执行了'</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>  <span class="token comment">// undefined</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>注意事项</strong></p> <blockquote><p>🚨注意</p> <p>在 <code>setup</code> 中你应该避免使用 <code>this</code>，因为它不会找到组件实例。</p> <p>在 <code>setup</code> 中，<code>this</code> 的值为 <code>undefined</code>。</p></blockquote> <p>问题小结:</p> <ul><li>Vue3 的 <code>setup</code> 组件选项内 <code>this</code> 的值为什么？</li></ul> <h3 id="响应式api-reactive"><a href="#响应式api-reactive" class="header-anchor">#</a> 响应式API - reactive</h3> <blockquote><p>🎯 本节目标</p> <ul><li>掌握reactive函数的作用和使用步骤</li></ul></blockquote> <p><strong>作用</strong></p> <p>​	reactive是一个函数，接收一个普通的对象传入，把<code>对象数据</code>转化为响应式对象并返回</p> <p><strong>使用步骤</strong></p> <ol><li>从vue框架中导入<code>reactive</code>函数</li> <li>在setup函数中调用reactive函数并将想要变成响应式的对象数据当成参数传入</li> <li>在setup函数中把reactive函数调用完毕之后的返回值以对象的形式返回出去</li></ol> <p><strong>代码演示</strong></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ state.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ state.age }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>state.name = <span class="token punctuation">'</span>pink<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>改值<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'itcast'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      state
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="响应式api-ref"><a href="#响应式api-ref" class="header-anchor">#</a> 响应式API - ref</h3> <blockquote><p>🎯 本节目标</p> <ul><li>了解ref函数的作用和使用步骤</li></ul></blockquote> <p><strong>作用</strong></p> <p>​	ref是一个函数，接受一个简单类型或者复杂类型的传入并返回一个响应式且可变的 ref 对象</p> <p><strong>使用步骤</strong></p> <ol><li>从vue框架中导出<code>ref</code>函数</li> <li>在setup函数中调用<code>ref</code>函数并传入数据（简单类型或者复杂类型）</li> <li>在setup函数中把ref函数调用完毕的返回值以对象的形式返回出去</li> <li>**注意：**在setup函数中使用ref结果，需要通过<code>.value</code>  访问，模板中使用不需要加.value</li></ol> <p><strong>代码演示</strong></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ money }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>money = 10086<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>改值10086<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeMondy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>改值6666<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> money <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token function-variable function">changeMondy</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      money<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">6666</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      money<span class="token punctuation">,</span>
      changeMondy
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="reative-对比-ref"><a href="#reative-对比-ref" class="header-anchor">#</a> reative 对比 ref</h3> <blockquote><p>🎯 本节目标</p> <ul><li>知道两个API的特定以及如何在项目中选择</li></ul></blockquote> <ol><li>ref 函数可以接收一个简单类型的值，返回一个可改变的 ref 响应式对象，从而弥补reactive函数不支持简单类型的问题</li> <li>reactive和ref函数都可以提供响应式数据的转换，具体什么时候需要使用哪个API社区还没有最佳实践，大家暂时可以使用自己熟练的API进行转换</li> <li>**推荐写法 **只有我们明确知道要转换的对象内部的字段名称我们才使用reactive，否则就一律使用ref，从而降低在语法选择上的心智负担</li></ol> <h2 id="单文件组件-script-setup"><a href="#单文件组件-script-setup" class="header-anchor">#</a> 单文件组件<code>&lt;script setup&gt;</code></h2> <p><code>&lt;script setup&gt;</code> 是在单文件组件 (SFC) 中使用组合式 API 的编译时语法糖。相比于普通的 <code>&lt;script&gt;</code> 语法，它具有更多优势：</p> <blockquote><p>官方文档：<a href="https://v3.cn.vuejs.org/api/sfc-script-setup.html#%E5%8D%95%E6%96%87%E4%BB%B6%E7%BB%84%E4%BB%B6-script-setup" target="_blank" rel="noopener noreferrer">⚓单文件组件 <code>&lt;script setup&gt;</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <ul><li>更少的样板内容，更简洁的代码。</li> <li>能够使用纯 Typescript 声明 props 和抛出事件。</li> <li>更好的运行时性能 (其模板会被编译成与其同一作用域的渲染函数，没有任何的中间代理)。</li> <li>更好的 IDE 类型推断性能 (减少语言服务器从代码中抽离类型的工作)。</li></ul> <h3 id="基本语法"><a href="#基本语法" class="header-anchor">#</a> 基本语法</h3> <p>要使用这个语法，需要将 <code>setup</code> 添加到 <code>&lt;script&gt;</code> 代码块上：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello script setup'</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>里面的代码会被编译成组件 <code>setup()</code> 函数的内容。这意味着与普通的 <code>&lt;script&gt;</code> 只在组件被首次引入的时候执行一次不同，<code>&lt;script setup&gt;</code> 中的代码会在<strong>每次组件实例被创建的时候执行</strong>。</p> <h3 id="顶层的绑定会被暴露给模板"><a href="#顶层的绑定会被暴露给模板" class="header-anchor">#</a> 顶层的绑定会被暴露给模板</h3> <p>当使用 <code>&lt;script setup&gt;</code> 的时候，任何在 <code>&lt;script setup&gt;</code> 声明的顶层的绑定 (包括变量，函数声明，以及 import 引入的内容) 都能在模板中直接使用：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 变量</span>
<span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token string">'Hello!'</span>

<span class="token comment">// 函数</span>
<span class="token keyword">function</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>log<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ msg }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="响应式"><a href="#响应式" class="header-anchor">#</a> 响应式</h3> <p>reactive 写法</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ state.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ state.age }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>state.name = <span class="token punctuation">'</span>pink<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>改值<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'itcast'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p>ref 写法</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ money }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>money = 10086<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>改值10086<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeMondy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>改值6666<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">const</span> money <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">changeMondy</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  money<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">6666</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="自动注册组件"><a href="#自动注册组件" class="header-anchor">#</a> 自动注册组件</h3> <p><code>&lt;script setup&gt;</code> 范围里的值也能被直接作为自定义组件的标签名使用，无需注册组件：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> MyComponent <span class="token keyword">from</span> <span class="token string">'./MyComponent.vue'</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MyComponent</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>将 <code>MyComponent</code> 看做被一个变量所引用。格式 <code>&lt;my-component&gt;</code> 同样能在模板中使用。不过，我们强烈建议使用 <code>&lt;MyComponent&gt;</code> 格式以保持一致性。同时也有助于区分原生的自定义元素。</p> <h3 id="响应式api-computed"><a href="#响应式api-computed" class="header-anchor">#</a> 响应式API - computed</h3> <blockquote><p>🎯 本节目标</p> <ul><li>掌握在计算属性函数computed的作用和使用步骤</li></ul></blockquote> <p><strong>作用</strong></p> <p>​	根据现有响应式数据经过一定的计算得到全新的数据</p> <p><strong>使用步骤</strong></p> <ol><li>从vue框架中导入<code>computed</code> 函数</li> <li>在setup函数中执行computed函数，并传入一个函数，在函数中定义计算公式</li> <li>把computed函数调用完的返回值放到setup函数return出去的对象中</li></ol> <p><strong>代码演示</strong></p> <p><img src="/vue3-ts-erabbit-client-pc-document/assets/img/computed.6bb9b6c2.png" alt=""></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  {{ list }}
  {{ filterList }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeList<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>change list<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> computed<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// 输入大于2的数字</span>
<span class="token keyword">const</span> filterList <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> list<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 修改list的函数</span>
<span class="token keyword">function</span> <span class="token function">changeList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  list<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h3 id="响应式api-watch"><a href="#响应式api-watch" class="header-anchor">#</a> 响应式API -  watch</h3> <blockquote><p>🎯 本节目标</p> <ul><li>掌握在侦听器watch函数的作用和使用步骤</li></ul></blockquote> <p><strong>作用</strong></p> <p>​	基于响应式数据的变化执行回调逻辑，和vue2中的watch的功能一致</p> <ol><li>普通监听  数据变化之后才执行回调逻辑</li> <li>立即执行  一上来先执行一次 不等数据变化</li> <li>深度监听  对象嵌套的场景 监听整个对象的变化</li></ol> <p><strong>使用步骤</strong></p> <ol><li>从vue框架中导入<code>watch</code>函数</li> <li>在setup函数中执行watch函数开启对响应式数据的监听</li> <li>watch函数接收三个常规参数
<ol><li>第一个参数为函数，返回你要监听变化的响应式数据</li> <li>第二个参数为响应式数据变化之后要执行的回调函数</li> <li>第三个参数为一个对象，在里面配置是否开启立刻执行或者深度监听</li></ol></li></ol> <p><strong>代码演示</strong></p> <p>1）普通监听</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  {{ age }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age++<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>change age<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span>
<span class="token function">watch</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> age<span class="token punctuation">.</span>value
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 数据变化之后的回调函数</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'age发生了变化'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p>2）开启立刻执行</p> <blockquote><p>watch的效果默认状态下，只有监听的数据发生变化才会执行回调，如果你需要在一上来的时候就立刻执行一次，需要配置一下<code>immediate</code>属性</p></blockquote> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  {{ age }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age++<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>change age<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span>
<span class="token function">watch</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 返回你想要监听的响应式属性(ref产生的对象必须加.value)</span>
    <span class="token keyword">return</span> age<span class="token punctuation">.</span>value
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 数据变化之后的回调函数</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'age发生了变化'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">immediate</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p>3）开启深度监听</p> <blockquote><p>当我们监听的数据是一个对象的时候，默认状态下，对象内部的属性发生变化是不会引起回调函数执行的，如果想让对象下面所有属性都能得到监听，需要开启<code>deep</code>配置</p></blockquote> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  {{ state.name }}
  {{ state.info.age }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>state.name = <span class="token punctuation">'</span>pink<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>change name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>state.info.age++<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>change age<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> toRefs<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'itcast'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">info</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">watch</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> state
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 数据变化之后的回调函数</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'age发生了变化'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p>4）更好的做法</p> <blockquote><p>使用watch的时候，尽量详细的表明你到底要监听哪个属性，避免使用deep引起的性能问题，比如我仅仅只是想在state对象的age属性变化的时候执行回调，可以这么写</p></blockquote> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  {{ state.name }}
  {{ state.info.age }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>state.name = <span class="token punctuation">'</span>pink<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>change name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>state.info.age++<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>change age<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> toRefs<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'itcast'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">info</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">watch</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 详细的告知你要监听谁</span>
    <span class="token keyword">return</span> state<span class="token punctuation">.</span>info<span class="token punctuation">.</span>age
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 数据变化之后的回调函数</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'age发生了变化'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h3 id="生命周期函数"><a href="#生命周期函数" class="header-anchor">#</a> 生命周期函数</h3> <blockquote><p>🎯 本节目标</p> <ul><li>掌握如何在setup函数中如何使用生命周期函数</li></ul></blockquote> <p><strong>使用步骤</strong></p> <ol><li>先从vue中导入以<code>on打头</code>的生命周期钩子函数</li> <li>在setup函数中调用生命周期函数并传入回调函数</li> <li>生命周期钩子函数可以调用多次</li></ol> <p><strong>代码演示</strong></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>生命周期函数<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token comment">// 时机成熟 回调函数自动执行</span>
<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'mounted生命周期执行了'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'mounted生命周期函数又执行了'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><table><thead><tr><th>选项式API下的生命周期函数使用</th> <th>组合式API下的生命周期函数使用</th></tr></thead> <tbody><tr><td><code>beforeCreate</code></td> <td>不需要（直接写到setup函数中）</td></tr> <tr><td><code>created</code></td> <td>不需要（直接写到setup函数中）</td></tr> <tr><td><code>beforeMount</code></td> <td><code>onBeforeMount</code></td></tr> <tr><td><code>mounted</code></td> <td><code>onMounted</code></td></tr> <tr><td><code>beforeUpdate</code></td> <td><code>onBeforeUpdate</code></td></tr> <tr><td><code>updated</code></td> <td><code>onUpdated</code></td></tr> <tr><td><code>beforeDestroyed</code></td> <td><code>onBeforeUnmount</code>（重命名了）</td></tr> <tr><td><code>destroyed</code></td> <td><code>onUnmounted</code>（重命名了）</td></tr> <tr><td><code>activated</code></td> <td><code>onActivated</code></td></tr> <tr><td><code>deactivated</code></td> <td><code>onDeactivated</code></td></tr></tbody></table> <p><strong>生命周期钩子函数使用场景</strong></p> <table><thead><tr><th>生命周期钩子函数</th> <th>应用场景</th></tr></thead> <tbody><tr><td>created</td> <td>发送ajax请求 / 挂载共用属性</td></tr> <tr><td>mounted</td> <td>发送ajax请求 /  依赖于dom的业务，比如地图，图表</td></tr> <tr><td>unmounted</td> <td>销毁操作，比如定时器</td></tr></tbody></table> <blockquote><p>🚨注意</p> <ul><li><code>beforeDestroyed/destroyed</code> 组件销毁重命名为 <code>beforeUnmount/unmounted</code></li></ul></blockquote> <h3 id="父子通信"><a href="#父子通信" class="header-anchor">#</a> 父子通信</h3> <p>在vue3的组合式API中，父传子的基础套路完全一样，基础思想依旧为：父传子是通过prop进行传入，子传父通过调用自定义事件完成</p> <blockquote><p>🎯 本节目标</p> <ul><li>掌握在组合式API下的父子通信</li></ul></blockquote> <p><strong>实现步骤</strong></p> <ol><li>setup函数提供俩个参数，第一个参数为props，第二个参数为一个对象context</li> <li>props为一个对象，内部包含了父组件传递过来的所有prop数据，context对象包含了emit属性，其中的<code>emit</code>可以触发自定义事件的执行从而完成子传父</li></ol> <p><strong>代码演示</strong></p> <p><img src="/vue3-ts-erabbit-client-pc-document/assets/img/props.69c64f77.png" alt=""></p> <p><code>app.vue</code></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>son</span> <span class="token attr-name">:msg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>msg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@get-msg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getMsg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>son</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Son <span class="token keyword">from</span> <span class="token string">'./components/Son.vue'</span>

<span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'this is msg'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">getMsg</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">msg</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p><code>components/Son.vue</code></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    {{msg}}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>setMsgFromSon<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>set<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">emits</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'get-msg'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 声明当前组件触发的自定义事件</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span><span class="token punctuation">{</span>emit<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">setMsgFromSon</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'get-msg'</span><span class="token punctuation">,</span><span class="token string">'这是一条来自子组件的新的msg信息'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      setMsgToSon
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="provide-和-inject"><a href="#provide-和-inject" class="header-anchor">#</a> provide 和 inject</h3> <h4 id="_1-使用场景"><a href="#_1-使用场景" class="header-anchor">#</a> 1. 使用场景</h4> <p>通常我们使用props进行父子之间的数据传递，但是如果组件嵌套层级较深，一层一层往下传递将会变的非常繁琐，有没有一种手段可以把这个过程简化一下呢，有的，就是我们马上要学习的provide 和 inject，它们配合起来可以方便的完成<strong>从上层组件向任意下层组件传递数据的效果</strong></p> <blockquote><p>🎯 本节目标</p> <ul><li>能够说清楚 <code>provide</code> 和 <code>inject</code> 这对API的使用场景，解决了什么问题</li></ul></blockquote> <p><img src="/vue3-ts-erabbit-client-pc-document/assets/img/provider.17772af3.png" alt=""></p> <h4 id="_2-基础使用"><a href="#_2-基础使用" class="header-anchor">#</a> 2. 基础使用</h4> <blockquote><p>🎯 本节目标</p> <ul><li>掌握在 setup 函数中使用 <code>provide</code> 和 <code>inject</code> 的基础用法</li></ul></blockquote> <p><strong>需求</strong></p> <ul><li>爷组件中有一份数据 传递给孙组件直接使用</li></ul> <p><strong>实现步骤</strong></p> <ol><li><p>顶层组件在setup方法中使用<code>provide函数</code>提供数据</p> <p><code>provide('key'，数据)</code></p></li> <li><p><strong>任何底层组件</strong>在setup方法中使用<code>inject函数</code>获取数据</p> <p><code>const data = inject('key')</code></p></li></ol> <p><strong>代码落地</strong></p> <p><code>爷爷组件 - app.vue</code></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Father</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Father</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> Father <span class="token keyword">from</span> <span class="token string">'@/components/Father'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> provide <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    Father
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">'柴柴老师'</span>
    <span class="token comment">// 使用provide配置项注入数据 key - value</span>
    <span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span> 
</code></pre></div><p><code>孙组件 - components/Son.vue</code></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  我是子组件
  {{ name }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> inject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      name
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>事实上，只要是后代组件，都可以方便的获取顶层组件提供的数据</p> <h4 id="_3-传递响应式数据"><a href="#_3-传递响应式数据" class="header-anchor">#</a> 3. 传递响应式数据</h4> <p>provide默认情况下传递的数据不是响应式的，也就是如果对provide提供的数据进行修改，并不能响应式的影响到底层组件使用数据的地方，如果想要传递响应数据也非常简单，只需要将传递的数据使用ref或者reactive生成即可</p> <blockquote><p>🎯 本节目标</p> <ul><li>掌握如何通过 <code>provide/inject</code> 传递响应式数据</li></ul></blockquote> <p><code>app.vue</code></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>father</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>father</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>change name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> Father <span class="token keyword">from</span> <span class="token string">'./components/Father.vue'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> provide<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    Father
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 使用ref转换成响应式再传递</span>
    <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'黑马程序员'</span><span class="token punctuation">)</span>
    <span class="token keyword">function</span> <span class="token function">changeName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      name<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'pink'</span>
    <span class="token punctuation">}</span>
    <span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      changeName
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span> 
</code></pre></div><h3 id="template-ref"><a href="#template-ref" class="header-anchor">#</a> Template-Ref</h3> <blockquote><p>🎯 本节目标</p> <ul><li>掌握在setup函数中如何使用ref获取dom节点或者组件实例对象</li></ul></blockquote> <p><strong>背景知识</strong></p> <p>​	在模板中使用ref，我们都很清楚，它一般有三种使用场景</p> <ol><li>ref + 普通dom标签  获取真实dom对象  <code>&lt;div ref=&quot;box&quot;&gt;&lt;/div&gt; this.$refs.box</code></li> <li>ref + 组件标签  获取组件实例对象   <code>&lt;Form ref=&quot;form&quot;/&gt; this.$refs.form.validate()</code></li> <li>ref + v-for 获取由dom对象（实例对象）组成的数组  （<strong>不经常使用</strong>）</li></ol> <p><strong>实现步骤</strong></p> <ol><li>使用ref函数传入null创建 ref对象 =&gt;  <code>const hRef = ref(null)</code></li> <li>模板中通过定义ref属性等于1中创建的ref对象名称建立关联  =&gt;  <code>&lt;h1 ref=&quot;hRef&quot;&gt;&lt;/h1&gt;</code></li> <li>把<code>hRef</code>return出去</li> <li>使用 =&gt; <code>hRef.value</code></li></ol> <p><strong>代码落地</strong></p> <p><code>components/RefComponent.vue</code></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  我是一个普通的组件
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>app.vue</code></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>h1Ref<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>我是普通dom标签<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref-comoonent</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>comRef<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ref-comoonent</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> RefComoonent <span class="token keyword">from</span> <span class="token string">'./components/RefComponent.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    RefComoonent
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> h1Ref <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> comRef <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>h1Ref<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>comRef<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// 必须return</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      h1Ref<span class="token punctuation">,</span>
      comRef
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span> 
</code></pre></div><h2 id="vue3-语法兼容问题"><a href="#vue3-语法兼容问题" class="header-anchor">#</a> Vue3 语法兼容问题</h2> <h3 id="官方文档-2"><a href="#官方文档-2" class="header-anchor">#</a> 官方文档</h3> <blockquote><p><a href="https://v3.cn.vuejs.org/guide/migration/introduction.html#%E9%9D%9E%E5%85%BC%E5%AE%B9%E7%9A%84%E5%8F%98%E6%9B%B4" target="_blank" rel="noopener noreferrer">⚓ 非兼容的变更<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h3 id="格外注意的非兼容变更"><a href="#格外注意的非兼容变更" class="header-anchor">#</a> 格外注意的非兼容变更</h3> <blockquote><p>vue3 对于 Vue2 版本的大部分语法都是可以兼容的，但是也有一些破坏性的语法更新，这个大家要格外注意</p></blockquote> <ol><li><p>过滤器filter移除 （插值表达式里不能再使用过滤器 可以使用methods替代）</p> <div class="language-vue extra-class"><pre class="language-vue"><code>{{ name | formatName}}
{{ formatName(name) }} // 插值中调用一个函数渲染的结果是什么？

data(){
  return {
    name:'this is name' // this is name cp
  }
},
methods:{
  fomartName(value){
    return value + 'cp'
  }
},
filters:{
  formatName(value){
     return value + 'cp'
  }
}
</code></pre></div></li> <li><p>.sync 语法移除  (dialog) （和v-model语法合并）</p></li> <li><p>$on 实例方法被移除，事件总线 eventBus 不能使用</p> <div class="language- extra-class"><pre class="language-text"><code>1. main.js
   Vue.prototype.eventBus = new Vue()
   
2. 获取数据的组件中
   this.eventBus.$on('get-name',(title)=&gt;{
      console.log('log')
   })
3. 发送数据的组件
   this.eventBus.$emit('get-name','this is title')
   
vue3 $on 给干掉了 事件总线的第二步被砍断了 vue3中默认vue不支持这个模式
</code></pre></div></li></ol> <h2 id="综合案例"><a href="#综合案例" class="header-anchor">#</a> 综合案例</h2> <blockquote><p>🎯 本节目标</p> <ul><li>巩固 <code>vue3</code> 中组合式 <code>API</code> 的使用</li></ul></blockquote> <h3 id="素材资源"><a href="#素材资源" class="header-anchor">#</a> 素材资源</h3> <p>案例仓库地址：https://gitee.com/vue-course-better/introduction-to-vue3</p> <p><strong>项目演示步骤：</strong></p> <ol><li><p>克隆项目到本地</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> clone  https://gitee.com/vue-course-better/introduction-to-vue3.git
</code></pre></div></li> <li><p>安装必要依赖</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span>
</code></pre></div></li> <li><p>开启 mock 接口服务，<strong>保持窗口不关闭</strong>  ！！！！！</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 安装 json-server mock工具  本地cmd </span>
<span class="token function">npm</span> <span class="token function">install</span> json-server
<span class="token comment"># 启动mock服务</span>
<span class="token function">npm</span> run json-server
</code></pre></div></li> <li><p><strong>另起一个bash窗口</strong> 开启前端服务</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> run dev
</code></pre></div></li> <li><p>浏览器输入 <a href="http://localhost:3000" target="_blank" rel="noopener noreferrer">http://localhost:3000<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>演示效果</p></li></ol> <h3 id="项目开发步骤"><a href="#项目开发步骤" class="header-anchor">#</a> 项目开发步骤</h3> <ol><li><p>切换到todo-test分支</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> checkout todo-test
</code></pre></div></li> <li><p>打开 app.vue</p> <p>已有基础样板代码，在这个基础上编写业务逻辑即可</p></li> <li><p>接口文档</p> <table><thead><tr><th>接口作用</th> <th>接口地址</th> <th>接口方法</th> <th>接口参数</th></tr></thead> <tbody><tr><td>获取列表</td> <td>http://localhost:3001/data</td> <td>GET</td> <td>无</td></tr> <tr><td>删除</td> <td>http://localhost:3001/data/:id</td> <td>DELETE</td> <td>id</td></tr> <tr><td>搜索</td> <td>http://localhost:3001/data/?name=keyword</td> <td>GET</td> <td>name（以name字段搜索）</td></tr></tbody></table></li></ol> <h3 id="实现功能"><a href="#实现功能" class="header-anchor">#</a> 实现功能</h3> <ol><li>table 列表渲染    element</li> <li>删除功能       当前id</li> <li>搜索功能       用的依旧是列表接口  多传一个参数</li> <li>清除功能       清空用来搜索的参数 获取列表</li></ol> <h2 id="vue3-社区生态"><a href="#vue3-社区生态" class="header-anchor">#</a> Vue3 社区生态</h2> <h3 id="社区生态"><a href="#社区生态" class="header-anchor">#</a> 社区生态</h3> <ul><li>社区生态 - 逐步完善</li> <li>整体优化 - 性能优化/TS支持优化/组合式API加持</li> <li>市场使用 - 部分技术选型激进的公司已经在生产环境使用了vue3</li></ul> <h3 id="社区生态作品"><a href="#社区生态作品" class="header-anchor">#</a> 社区生态作品</h3> <table><thead><tr><th>作品名称</th> <th>官方地址</th> <th>简介</th></tr></thead> <tbody><tr><td>element-plus</td> <td>https://element-plus.gitee.io/#/zh-CN</td> <td>Element Plus，一套为开发者、设计师和产品经理准备的基于 Vue 3.0 的桌面端组件库</td></tr> <tr><td>ant-design-vue</td> <td>https://antdv.com/docs/vue/introduce-cn/</td> <td>ant-design-vue 是 Ant Design 的 Vue 实现，组件的风格与 Ant Design 保持同步</td></tr> <tr><td>arco-design</td> <td>https://arco.design/vue/docs/start</td> <td>字节跳动团队出品，基于 Vue3.2 的桌面端组件库</td></tr> <tr><td>vant3</td> <td>https://vant-contrib.gitee.io/vant/v3/#/zh-CN</td> <td>有赞前端团队开源的移动端组件库，目前 Vant 官方提供了 <a href="https://vant-contrib.gitee.io/vant/v2" target="_blank" rel="noopener noreferrer">Vue 2 版本<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://vant-contrib.gitee.io/vant" target="_blank" rel="noopener noreferrer">Vue 3 版本<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>和<a href="http://vant-contrib.gitee.io/vant-weapp" target="_blank" rel="noopener noreferrer">微信小程序版本<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr> <tr><td>Naive UI</td> <td>https://www.naiveui.com/zh-CN/</td> <td>一个 Vue 3 组件库，比较完整，主题可调，使用 TypeScript，不算太慢，有点意思</td></tr> <tr><td>VueUse</td> <td>https://vueuse.org/</td> <td>基于组合式api的常用集合，小兔鲜儿项目会部分使用</td></tr></tbody></table></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main> <!----></div><div class="global-ui"></div></div>
    <script src="/vue3-ts-erabbit-client-pc-document/assets/js/app.37883b6e.js" defer></script><script src="/vue3-ts-erabbit-client-pc-document/assets/js/2.6206effc.js" defer></script><script src="/vue3-ts-erabbit-client-pc-document/assets/js/5.eade28ba.js" defer></script>
  </body>
</html>